"use strict";var Typebot=(()=>{var E=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var Q=(e,t)=>{for(var o in t)E(e,o,{get:t[o],enumerable:!0})},G=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of R(t))!Y.call(e,r)&&r!==o&&E(e,r,{get:()=>t[r],enumerable:!(n=W(t,r))||n.enumerable});return e};var K=e=>G(E({},"__esModule",{value:!0}),e);var Pe={};Q(Pe,{close:()=>u,default:()=>Ee,getBubbleActions:()=>v,getPopupActions:()=>P,hideMessage:()=>T,initBubble:()=>x,initContainer:()=>k,initPopup:()=>g,localStorageKeys:()=>y,open:()=>w,setHiddenVariables:()=>C,showMessage:()=>S,toggle:()=>B});var D=e=>{let t=d({...e,loadWhenVisible:!0});return t.style.display="none",t},i=e=>{let t=e.querySelector(".typebot-iframe");J(t),t.style.display="flex",setTimeout(()=>e.classList.add("iframe-opened"),50),e.classList.remove("message-opened")},a=e=>{let t=e.querySelector(".typebot-iframe");e.classList.remove("iframe-opened"),setTimeout(()=>t.style.display="none",550)},J=e=>{!e.dataset.src||(e.src=e.dataset.src,e.removeAttribute("data-src"))},V=e=>e.classList.contains("iframe-opened");function l(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}l(`#typebot-popup{position:fixed;top:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;visibility:hidden;opacity:0;transition:opacity .2s;z-index:99999}#typebot-popup.opened{opacity:1;visibility:visible}#typebot-popup>iframe{width:100%;height:600px;max-width:800px;border-radius:10px}
`);var g=e=>{if(document.readyState!=="complete")return window.addEventListener("load",()=>g(e)),{close:()=>{},open:()=>{}};let t=document.getElementById("typebot-popup");t&&t.remove();let o=X(e);return document.body?document.body.append(o):window.onload=()=>document.body.append(o),{open:()=>p(o),close:()=>m(o)}},X=e=>{let{delay:t}=e,o=Z(t);_(o);let n=d({...e,loadWhenVisible:!0});return o.appendChild(n),o},Z=e=>{let t=document.createElement("div");return t.id="typebot-popup",e!==void 0&&te(t,e),t},p=e=>{let t=e.children[0];t.dataset.src&&oe(t),document.body.style.overflowY="hidden",e.classList.add("opened")},m=e=>{document.body.style.overflowY="auto",e.classList.remove("opened")},A=e=>e.classList.contains("opened"),_=e=>e.addEventListener("click",t=>ee(t,e)),ee=(e,t)=>{e.preventDefault(),e.target.tagName!=="iframe"&&m(t)},te=(e,t)=>{setTimeout(()=>{p(e)},t)},oe=e=>{e.src=e.dataset.src,e.removeAttribute("data-src")},P=e=>{let t=e??document.querySelector("#typebot-popup");return{open:()=>{p(t)},close:()=>{m(t)}}};var u=()=>{let e=document.querySelector("#typebot-popup");e&&m(e);let t=document.querySelector("#typebot-bubble");t&&a(t)};var y={rememberClose:"rememberClose"};var F=e=>{let t=document.createElement("button");return t.id="typebot-bubble-button",t.style.backgroundColor=(e==null?void 0:e.color)??"#0042DA",t.appendChild(ne(e==null?void 0:e.iconUrl,e==null?void 0:e.iconColor,e==null?void 0:e.iconStyle)),t.appendChild(ie((e==null?void 0:e.iconColor)??(e==null?void 0:e.closeIconColor))),t},ne=(e,t,o)=>{if(!e)return re(t);let n=document.createElement("img");return n.classList.add("icon"),n.src=e,o&&n.setAttribute("style",o),n},re=e=>{let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 24 24"),t.innerHTML=se(),t.classList.add("icon"),t.style.stroke=e??"#ffffff",t},ie=e=>{let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 24 24"),t.innerHTML=M,t.classList.add("close-icon"),t.style.stroke=e??"#ffffff",t},se=()=>'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',M='<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>';l(`#typebot-bubble{z-index:99999;position:fixed}#typebot-bubble>button{padding:0;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:99999;position:fixed;bottom:20px;right:20px;width:60px;height:60px;border-radius:100%;background-color:#e67200;box-shadow:#0000000f 0 1px 6px,#00000029 0 2px 32px;border:medium none}#typebot-bubble button:hover{filter:brightness(.95)}#typebot-bubble button:active{filter:brightness(.75)}#typebot-bubble>button:focus{outline:none}#typebot-bubble>button>.icon{transition:opacity .5s ease-out 0s,transform .5s ease-out 0s}#typebot-bubble>button>svg.icon{fill:none;width:55%;stroke-width:2px;stroke:#fff}#typebot-bubble>button>img.icon{width:80%;height:80%;border-radius:100%;object-fit:cover;object-position:center}#typebot-bubble.iframe-opened>button>.icon{transform:rotate(90deg) scale(0);opacity:0}#typebot-bubble>button>.close-icon{position:absolute;transform:rotate(-90deg) scale(0);opacity:0;transition:opacity .5s ease-out 0s,transform .5s ease-out 0s;width:55%;stroke-width:2px;stroke:#fff}#typebot-bubble.iframe-opened>button>.close-icon{transform:rotate(90deg) scale(1);opacity:1}#typebot-bubble>iframe{opacity:0;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:99999;border-radius:10px;position:fixed;transform:translateY(100px);transition:opacity .5s ease-out 0s,transform .5s ease-out 0s;box-shadow:#00000029 0 5px 40px;width:400px;max-height:680px;inset:auto 20px 90px auto;height:calc(100% - 160px);background-color:#fff}#typebot-bubble.iframe-opened>iframe{transform:translate(0);opacity:1}.typebot-chat-button.active .typebot-chat-icon{transform:rotate(90deg) scale(0);opacity:0}.typebot-chat-button:not(.active) .typebot-chat-close{transform:rotate(-90deg) scale(0);opacity:0}.typebot-iframe-container:not(.active){opacity:0;transform:translateY(100px)}.typebot-iframe-container.active{opacity:1;transform:translate(0)}#typebot-bubble>.proactive-message{font-size:18px;color:#303235;opacity:0;visibility:hidden;transform:translateY(10px);transition:opacity .5s ease-out,transform .5s ease-out;cursor:pointer;font-weight:300;bottom:90px;right:20px;z-index:99999;position:fixed;max-width:280px;background-color:#fff;box-shadow:0 3px 15px -3px #0000001a,0 4px 6px -2px #0000000d;padding:16px;display:flex;align-items:center;border-radius:8px}#typebot-bubble.message-opened>.proactive-message{opacity:1;visibility:visible;transform:translate(0)}#typebot-bubble>.proactive-message>.close-button{position:absolute;top:-15px;right:-7px;width:30px;height:30px;background-color:#edf2f7;border-radius:100%;border:medium none;outline:currentcolor none medium;fill:#4a5568;cursor:pointer;padding:2px}#typebot-bubble>.proactive-message>img{margin-right:8px;width:40px;height:40px;flex-shrink:0;border-radius:100%;object-fit:cover}#typebot-bubble>.proactive-message>p{margin:0}@media screen and (max-width: 450px){#typebot-bubble>.proactive-message{max-width:200px;font-size:15px;bottom:70px;right:10px}#typebot-bubble>button{width:50px!important;height:50px!important;bottom:10px!important;right:10px!important}#typebot-bubble>iframe{inset:0 0 auto auto;width:100%;height:calc(100% - 70px);max-height:none}}
`);var x=e=>{if(document.readyState!=="complete")return window.addEventListener("load",()=>x(e)),{close:()=>{},open:()=>{}};let t=document.getElementById("typebot-bubble");t&&t.remove();let{bubbleElement:o,proactiveMessageElement:n}=ae(e);return(e.autoOpenDelay||e.autoOpenDelay===0)&&!O()&&(L(),setTimeout(()=>i(o),e.autoOpenDelay)),document.body?document.body.appendChild(o):window.onload=()=>document.body.appendChild(o),v(o,n)},ae=e=>{let t=document.createElement("div");t.id="typebot-bubble";let o=F(e.button);t.appendChild(o);let n=e.proactiveMessage&&!O()?le(e.proactiveMessage,t):void 0,r=D(e);return o.addEventListener("click",()=>{r.style.display==="none"?i(t):a(t)}),n&&n.addEventListener("click",()=>ce(t,r)),t.appendChild(r),{bubbleElement:t,proactiveMessageElement:n,iframeElement:r}},ce=(e,t)=>{t.style.display==="none"?i(e):a(e),e.classList.remove("message-opened")},v=(e,t)=>{let o=e??document.querySelector("#typebot-bubble");return o?{openProactiveMessage:t??document.querySelector("#typebot-bubble .proactive-message")?()=>{b(o)}:void 0,open:()=>{i(o)},close:()=>{a(o)}}:{close:()=>{},open:()=>{}}},le=(e,t)=>{let o=j(e,t);return t.appendChild(o),o},O=()=>!!localStorage.getItem(y.rememberClose),L=()=>localStorage.setItem(y.rememberClose,"true");var j=(e,t)=>{let o=document.createElement("div");return o.classList.add("proactive-message"),e.delay!==void 0&&pe(t,e),e.avatarUrl&&o.appendChild(me(e.avatarUrl)),o.appendChild(de(e.textContent)),o.appendChild(ue(t)),o},pe=(e,t)=>{setTimeout(()=>{b(e)},t.delay)},me=e=>{let t=document.createElement("img");return t.src=e,t},de=e=>{let t=document.createElement("p");return t.innerHTML=e,t},ue=e=>{let t=document.createElement("button");return t.classList.add("close-button"),t.innerHTML=`<svg viewBox="0 0 24 24" style="stroke:black; stroke-width:2px; margin:4px">${M}</svg>`,t.addEventListener("click",o=>be(o,e)),t},b=e=>{e.classList.add("message-opened")},be=(e,t)=>{e.stopPropagation(),I(t)},I=e=>{L(),e.classList.remove("message-opened")};var T=()=>{let e=document.querySelector("#typebot-bubble");e&&I(e)};var w=()=>{let e=document.querySelector("#typebot-popup");e&&p(e);let t=document.querySelector("#typebot-bubble");t&&i(t)};var C=e=>{let t=document.querySelector(".typebot-iframe");if(!t)return;let o=t.getAttribute("data-src")||t.src,n=new URLSearchParams(o.split("?")[1]),r={};n.forEach((h,s)=>{r[s]=h});let c=t.hasAttribute("data-src"),f=`${o.split("?")[0]}${H({...r,...e})}`;t.setAttribute(c?"data-src":"src",f)},H=e=>fe(e),fe=e=>e&&Object.keys(e).length>0?`?${Object.keys(e).filter(t=>e[t]).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&")}`:"";var S=()=>{let e=document.querySelector("#typebot-bubble");e&&b(e)};var B=()=>{let e=document.querySelector("#typebot-popup");e&&(A(e)?m(e):p(e));let t=document.querySelector("#typebot-bubble");t&&(V(t)?a(t):i(t))};l(`.typebot-iframe{width:100%;height:100%;border:none;border-radius:inherit}
`);var d=({backgroundColor:e,url:t,...o})=>{let{loadWhenVisible:n,hiddenVariables:r}=o,c=new URLSearchParams(document.location.search),f={};c.forEach(($,N)=>{f[N]=$});let h=`${t}${H({...r,...f})}`,s=document.createElement("iframe");s.setAttribute(n?"data-src":"src",h),s.setAttribute("data-id",t);let q=Math.random().toString(36).substring(7),U=`${t}-${q}`;s.setAttribute("id",U),e&&(s.style.backgroundColor=e),s.classList.add("typebot-iframe");let{onNewVariableValue:z}=o;return ge({onNewVariableValue:z}),s},ge=e=>{window.addEventListener("message",t=>{t.data.from==="typebot"&&ye(t.data,e)})},ye=(e,t)=>{e.redirectUrl&&window.open(e.redirectUrl),e.newVariableValue&&t.onNewVariableValue&&t.onNewVariableValue(e.newVariableValue),e.codeToExecute&&Function(e.codeToExecute)(),e.closeChatBubble&&u()};var k=(e,t)=>{let{loadWhenVisible:o}=t,n=document.getElementById(e);if(!n)return;if(n.children[0])return n.children[0];let r=o??!0,c=d({...t,loadWhenVisible:r});return r&&xe(c),n.appendChild(c),c},xe=e=>{new IntersectionObserver(o=>{var n;((n=o.pop())==null?void 0:n.isIntersecting)===!0&&ve(e)},{threshold:[0]}).observe(e)},ve=e=>{!e.dataset.src||(e.src=e.dataset.src,e.removeAttribute("data-src"))};var he={initContainer:k,initPopup:g,initBubble:x,getPopupActions:P,getBubbleActions:v,open:w,close:u,toggle:B,showMessage:S,hideMessage:T,setHiddenVariables:C},Ee=he;return K(Pe);})();
//# sourceMappingURL=index.global.js.map